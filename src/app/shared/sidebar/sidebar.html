<aside
  [style.width.px]="currentWidth()"
  styleClass="sidebar"
  class="sidebar relative flex flex-col font-sans shadow-md bg-white z-40 transition-transform duration-300 lg:static lg:translate-x-0"
  [ngClass]="className()"
>
  <!-- Brand -->
  <div class="flex items-center justify-between px-4 pb-4">
    @if (!isSidebarCollapsed()) {
      <div class="flex items-center gap-2">
        <span class="text-(--color-primary) font-bold text-2xl">{{ 'app.name' | translate }}</span>
        <span class="bg-(--primary)/10 text-(--color-primary) text-(length:--space-sm) font-semibold px-2.5 py-1 rounded">
          {{ 'app.country' | translate }}
        </span>
      </div>
    }

  </div>

  <!-- Divider -->
  <div class="border-t border-gray-200"></div>

  <!-- Nav -->
  <nav
    [class]="'flex-1 flex flex-col overflow-hidden ' + (isSidebarCollapsed() ? 'gap-1 px-2 pt-4' : 'gap-4 px-4 pt-4')"
    role="navigation"
    [attr.aria-label]="'nav.mainMenu' | translate"
  >
    <app-sidebar-group>
      @if (!isSidebarCollapsed()) {
        <app-sidebar-group-label>{{ 'nav.mainMenu' | translate }}</app-sidebar-group-label>
      }

      @for (item of menuItems(); track item.label) {
        <a
          [routerLink]="item.routerLink"
          routerLinkActive="sidebar-item-active"
          class="sidebar-item"
          [class.justify-center]="isSidebarCollapsed()"
          [class.justify-start]="!isSidebarCollapsed()"
          [attr.aria-label]="item.label | translate"
          [pTooltip]="isSidebarCollapsed() ? (item.label | translate) : ''"
          tooltipPosition="right"
        >
          <i [class]="item.icon + (isSidebarCollapsed() ? '' : ' mr-2')" aria-hidden="true"></i>

          @if (!isSidebarCollapsed()) {
            <span>{{ item.label | translate }}</span>
          }
        </a>
      }
    </app-sidebar-group>
  </nav>

  <!-- User Profile -->
  <div class="m-auto space-y-2 ">
    <div class="border-t border-gray-200 mb-2"></div>

    <div
      [class]="
        'hover:bg-gray-100 flex cursor-pointer items-center rounded-md transition ' +
        (isSidebarCollapsed() ? 'mx-2 p-2 justify-center' : 'mx-4 p-2 gap-2')
      "
      [pTooltip]="isSidebarCollapsed() ? userDisplayName() : ''"
      tooltipPosition="right"
    >
      <p-avatar icon="pi pi-user" shape="circle" [size]="isSidebarCollapsed() ? 'normal' : 'normal'"></p-avatar>

      @if (!isSidebarCollapsed()) {
        <div class="flex-1">
          <div class="font-medium text-sm text-gray-900">{{ userDisplayName() }}</div>
          <div class="text-xs text-gray-500">{{ userRoleLabel() | translate }}</div>
        </div>
        <i class="pi pi-chevron-up text-xs text-gray-400"></i>
      }
    </div>
    <div>
      @if (!isSidebarCollapsed()) {
        <!-- Logout Button (expanded) -->
        <button
          pButton
          type="button"
          class="btn hover:bg-(--danger-light) hover:text-(--danger) flex items-center justify-center gap-2"
          [label]="'auth.logout' | translate"
          icon="pi pi-sign-out"
          (click)="logout()"
        ></button>
      } @else {
        <!-- Logout Button (collapsed) -->
        <div class="flex justify-center px-2">
          <button
            pButton
            type="button"
            class="p-button-outlined shadow-sm hover:shadow-md"
            icon="pi pi-sign-out"
            (click)="logout()"
          ></button>
        </div>
      }
    </div>

  </div>
</aside>
