<div class="fc-field" [class.fc-invalid]="invalid" [class.fc-disabled]="disabled">
  <div class="fc-label-row" *ngIf="!hideLabel">
    <label class="fc-label" [for]="resolvedInputId">
      <span>{{ label }}</span>
      @if(requiredMark) {
        <span class="fc-required">*</span>
      }
    </label>
    @if(hint) {
      <span class="fc-hint">{{ hint }}</span>
    }
  </div>

  @if(description) {
    <p class="fc-description">{{ description }}</p>
  }

  <div class="fc-control">
    @if (variant === 'autocomplete') {
      <p-autoComplete
        [inputId]="resolvedInputId"
        [class]="invalid ? 'fc-select fc-select-invalid' : 'fc-select'"
        [suggestions]="filteredOptions"
        (completeMethod)="search($event)"
        [optionLabel]="optionLabel"
        [dataKey]="optionValue || undefined"
        [dropdown]="true"
        [forceSelection]="false"
        [placeholder]="placeholder"
        [appendTo]="appendTo"
        [disabled]="disabled"
        [panelStyleClass]="'fc-select-panel'"
        [ngModel]="value"
        (onSelect)="onSelect($event)"
        (onClear)="onClear()"
        (onBlur)="handleBlur()"
        [showClear]="showClear"
        [attr.aria-invalid]="ariaInvalid"
        [attr.aria-label]="ariaLabel || (hideLabel ? label : null)"
      ></p-autoComplete>
    } @else {
      <p-select
        class="input"
        [id]="resolvedInputId"
        [class]="invalid ? 'fc-select fc-select-invalid' : 'fc-select'"
        [options]="options"
        [optionLabel]="optionLabel"
        [optionValue]="optionValue || undefined"
        [optionDisabled]="optionDisabled"
        [placeholder]="placeholder"
        [appendTo]="appendTo"
        [disabled]="disabled"
        [filter]="filter"
        [showClear]="showClear"
        [panelStyleClass]="'fc-select-panel fc-no-filter-icon'"
        [ngModel]="value"
        (ngModelChange)="handleChange($event)"
        (onBlur)="handleBlur()"
        [attr.aria-invalid]="ariaInvalid"
        [attr.aria-label]="ariaLabel || (hideLabel ? label : null)"
      ></p-select>
    }
  </div>

  @if(errorList.length) {
    <div class="fc-errors">
      @for(error of errorList; track error) {
        <span>{{ error }}</span>
      }
    </div>
  }
</div>